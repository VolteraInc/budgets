# Budget 2.0 — Engineering README

This repo contains the TypeScript source for the **Budget 2.0** Google Apps Script project. You will write code in `src/` and push compiled output to Apps Script.

## Quick start

```bash
# 1) Install prerequisites
node -v            # v18+ recommended
npm -v
npm i -g @google/clasp typescript

# 2) Install dependencies
npm i

# 3) Authenticate to Google
clasp login

# 4) Build and push to Apps Script
npm run deploy
```

## Prerequisites

- **Node.js** v18 or newer.
- **npm** comes with Node.js.
- **TypeScript** compiler. Installed as a dependency or globally.
- **clasp** (Command Line Apps Script) to push code to Google.

If you do not have them:

```bash
# Node.js: https://nodejs.org/
npm i -g @google/clasp typescript
```

## Authentication with clasp

You must authenticate once before you can push code.

```bash
clasp login
```

This opens a browser window. Use your engineering Google account that owns or has edit access to the **Budget 2.0** Apps Script project.

## Project structure

```
root/
├─ src/                # All source files you edit (TS, HTML, JSON, etc.)
├─ build/              # Output folder populated on build
├─ package.json        # npm scripts
├─ tsconfig.json       # TypeScript config
└─ .clasp.json         # Links this repo to the Budget 2.0 Apps Script project
```

- **All files you edit live in `src/`.**
- **The `build/` folder is generated on build.** The contents of `build/` are what get **pushed** to the **Budget 2.0** Apps Script project.

> Make sure `.clasp.json` contains the correct `scriptId` for Budget 2.0.

Example:

```json
{
  "scriptId": "<YOUR_BUDGET_2_SCRIPT_ID>",
  "rootDir": "build/"
}
```

## npm scripts

These are the basic scripts and what they do.

```json
{
  "scripts": {
    "build": "rimraf build && tsc && copyfiles -u 1 src/**/*.{html,json} build/",
    "deploy": "npm run build && clasp push"
  }
}
```

- **`npm run build`** nukes the `build/` folder then compiles TypeScript to JavaScript into `build/` and copies html and json files.
- **`npm run deploy`** builds then pushes the `build/` folder to the linked Apps Script project using `clasp push`.

## Typical workflow

1. Pull the latest changes from Git.
2. Write or edit code in `src/`.
3. Run `npm run deploy` to push to Apps Script.
4. Test in the Apps Script UI or the attached spreadsheet.

## First time setup checklist

- Install Node.js and npm.
- `npm i -g @google/clasp typescript`.
- `npm i` in the repo root.
- `clasp login` with your engineering Google account.
- Confirm `.clasp.json` points to Budget 2.0 and `rootDir` is `build`.
- `npm run deploy` to push the initial build.

## Notes

- Keep `src/` as the single source of truth. Do not edit files in `build/` by hand.
- The `build/` folder is safe to delete. It will be regenerated by the build.
